<?php include_once("../globalconfig.php"); require_once("../dbconnectvi.php");
$Db = new dbInvestments();
if(!isset($_SESSION['UserNames']))
{
        header('Location:../pelogin.php');
}
else
{?>
<style>
.showtextlarge {
    border: 0 none;
    left: 16px;
    position: absolute;
    top: -9px;
    z-index: 20;
    -webkit-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    transform: rotate(90deg);
}
     .select2-container{box-sizing:border-box;display:inline-block;margin:0;position:relative;vertical-align:middle}.select2-container .select2-selection--single{box-sizing:border-box;cursor:pointer;display:block;height:28px;user-select:none;-webkit-user-select:none}.select2-container .select2-selection--single .select2-selection__rendered{display:block;padding-left:8px;padding-right:20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.select2-container .select2-selection--single .select2-selection__clear{position:relative}.select2-container[dir="rtl"] .select2-selection--single .select2-selection__rendered{padding-right:8px;padding-left:20px}.select2-container .select2-selection--multiple{box-sizing:border-box;cursor:pointer;display:block;min-height:32px;user-select:none;-webkit-user-select:none}.select2-container .select2-selection--multiple .select2-selection__rendered{display:inline-block;overflow:hidden;padding-left:8px;text-overflow:ellipsis;white-space:nowrap}.select2-container .select2-search--inline{float:left}.select2-container .select2-search--inline .select2-search__field{box-sizing:border-box;border:none;font-size:100%;margin-top:5px;padding:0}.select2-container .select2-search--inline .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-dropdown{background-color:white;border:1px solid #aaa;border-radius:4px;box-sizing:border-box;display:block;position:absolute;left:-100000px;width:100%;z-index:1051}.select2-results{display:block}.select2-results__options{list-style:none;margin:0;padding:0}.select2-results__option{padding:6px;user-select:none;-webkit-user-select:none}.select2-results__option[aria-selected]{cursor:pointer}.select2-container--open .select2-dropdown{left:0}.select2-container--open .select2-dropdown--above{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--open .select2-dropdown--below{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.select2-search--dropdown{display:block;padding:4px}.select2-search--dropdown .select2-search__field{padding:4px;width:100%;box-sizing:border-box}.select2-search--dropdown .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-search--dropdown.select2-search--hide{display:none}.select2-close-mask{border:0;margin:0;padding:0;display:block;position:fixed;left:0;top:0;min-height:100%;min-width:100%;height:auto;width:auto;opacity:0;z-index:99;background-color:#fff;filter:alpha(opacity=0)}.select2-hidden-accessible{border:0 !important;clip:rect(0 0 0 0) !important;-webkit-clip-path:inset(50%) !important;clip-path:inset(50%) !important;height:1px !important;overflow:hidden !important;padding:0 !important;position:absolute !important;width:1px !important;white-space:nowrap !important}.select2-container--default .select2-selection--single{background-color:#fff;border:1px solid #aaa;border-radius:4px}.select2-container--default .select2-selection--single .select2-selection__rendered{color:#444;line-height:28px}.select2-container--default .select2-selection--single .select2-selection__clear{cursor:pointer;float:right;font-weight:bold}.select2-container--default .select2-selection--single .select2-selection__placeholder{color:#999}.select2-container--default .select2-selection--single .select2-selection__arrow{height:26px;position:absolute;top:1px;right:1px;width:20px}.select2-container--default .select2-selection--single .select2-selection__arrow b{border-color:#888 transparent transparent transparent;border-style:solid;border-width:5px 4px 0 4px;height:0;left:50%;margin-left:-4px;margin-top:-2px;position:absolute;top:50%;width:0}.select2-container--default[dir="rtl"] .select2-selection--single .select2-selection__clear{float:left}.select2-container--default[dir="rtl"] .select2-selection--single .select2-selection__arrow{left:1px;right:auto}.select2-container--default.select2-container--disabled .select2-selection--single{background-color:#eee;cursor:default}.select2-container--default.select2-container--disabled .select2-selection--single .select2-selection__clear{display:none}.select2-container--default.select2-container--open .select2-selection--single .select2-selection__arrow b{border-color:transparent transparent #888 transparent;border-width:0 4px 5px 4px}.select2-container--default .select2-selection--multiple{background-color:white;border:1px solid #aaa;border-radius:4px;cursor:text}.select2-container--default .select2-selection--multiple .select2-selection__rendered{box-sizing:border-box;list-style:none;margin:0;padding:0 5px;width:100%}.select2-container--default .select2-selection--multiple .select2-selection__rendered li{list-style:none}.select2-container--default .select2-selection--multiple .select2-selection__placeholder{color:#999;margin-top:5px;float:left}.select2-container--default .select2-selection--multiple .select2-selection__clear{cursor:pointer;float:right;font-weight:bold;margin-top:5px;margin-right:10px}.select2-container--default .select2-selection--multiple .select2-selection__choice{background-color:#e4e4e4;border:1px solid #aaa;border-radius:4px;cursor:default;float:left;margin-right:5px;margin-top:5px;padding:0 5px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove{color:#999;cursor:pointer;display:inline-block;font-weight:bold;margin-right:2px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove:hover{color:#333}.select2-container--default[dir="rtl"] .select2-selection--multiple .select2-selection__choice,.select2-container--default[dir="rtl"] .select2-selection--multiple .select2-selection__placeholder,.select2-container--default[dir="rtl"] .select2-selection--multiple .select2-search--inline{float:right}.select2-container--default[dir="rtl"] .select2-selection--multiple .select2-selection__choice{margin-left:5px;margin-right:auto}.select2-container--default[dir="rtl"] .select2-selection--multiple .select2-selection__choice__remove{margin-left:2px;margin-right:auto}.select2-container--default.select2-container--focus .select2-selection--multiple{border:solid black 1px;outline:0}.select2-container--default.select2-container--disabled .select2-selection--multiple{background-color:#eee;cursor:default}.select2-container--default.select2-container--disabled .select2-selection__choice__remove{display:none}.select2-container--default.select2-container--open.select2-container--above .select2-selection--single,.select2-container--default.select2-container--open.select2-container--above .select2-selection--multiple{border-top-left-radius:0;border-top-right-radius:0}.select2-container--default.select2-container--open.select2-container--below .select2-selection--single,.select2-container--default.select2-container--open.select2-container--below .select2-selection--multiple{border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--default .select2-search--dropdown .select2-search__field{border:1px solid #aaa}.select2-container--default .select2-search--inline .select2-search__field{background:transparent;border:none;outline:0;box-shadow:none;-webkit-appearance:textfield}.select2-container--default .select2-results>.select2-results__options{max-height:200px;overflow-y:auto}.select2-container--default .select2-results__option[role=group]{padding:0}.select2-container--default .select2-results__option[aria-disabled=true]{color:#999}.select2-container--default .select2-results__option[aria-selected=true]{background-color:#ddd}.select2-container--default .select2-results__option .select2-results__option{padding-left:1em}.select2-container--default .select2-results__option .select2-results__option .select2-results__group{padding-left:0}.select2-container--default .select2-results__option .select2-results__option .select2-results__option{margin-left:-1em;padding-left:2em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-2em;padding-left:3em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-3em;padding-left:4em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-4em;padding-left:5em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-5em;padding-left:6em}.select2-container--default .select2-results__option--highlighted[aria-selected]{background-color:#5897fb;color:white}.select2-container--default .select2-results__group{cursor:default;display:block;padding:6px}.select2-container--classic .select2-selection--single{background-color:#f7f7f7;border:1px solid #aaa;border-radius:4px;outline:0;background-image:-webkit-linear-gradient(top, #fff 50%, #eee 100%);background-image:-o-linear-gradient(top, #fff 50%, #eee 100%);background-image:linear-gradient(to bottom, #fff 50%, #eee 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFFFF', endColorstr='#FFEEEEEE', GradientType=0)}.select2-container--classic .select2-selection--single:focus{border:1px solid #5897fb}.select2-container--classic .select2-selection--single .select2-selection__rendered{color:#444;line-height:28px}.select2-container--classic .select2-selection--single .select2-selection__clear{cursor:pointer;float:right;font-weight:bold;margin-right:10px}.select2-container--classic .select2-selection--single .select2-selection__placeholder{color:#999}.select2-container--classic .select2-selection--single .select2-selection__arrow{background-color:#ddd;border:none;border-left:1px solid #aaa;border-top-right-radius:4px;border-bottom-right-radius:4px;height:26px;position:absolute;top:1px;right:1px;width:20px;background-image:-webkit-linear-gradient(top, #eee 50%, #ccc 100%);background-image:-o-linear-gradient(top, #eee 50%, #ccc 100%);background-image:linear-gradient(to bottom, #eee 50%, #ccc 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFEEEEEE', endColorstr='#FFCCCCCC', GradientType=0)}.select2-container--classic .select2-selection--single .select2-selection__arrow b{border-color:#888 transparent transparent transparent;border-style:solid;border-width:5px 4px 0 4px;height:0;left:50%;margin-left:-4px;margin-top:-2px;position:absolute;top:50%;width:0}.select2-container--classic[dir="rtl"] .select2-selection--single .select2-selection__clear{float:left}.select2-container--classic[dir="rtl"] .select2-selection--single .select2-selection__arrow{border:none;border-right:1px solid #aaa;border-radius:0;border-top-left-radius:4px;border-bottom-left-radius:4px;left:1px;right:auto}.select2-container--classic.select2-container--open .select2-selection--single{border:1px solid #5897fb}.select2-container--classic.select2-container--open .select2-selection--single .select2-selection__arrow{background:transparent;border:none}.select2-container--classic.select2-container--open .select2-selection--single .select2-selection__arrow b{border-color:transparent transparent #888 transparent;border-width:0 4px 5px 4px}.select2-container--classic.select2-container--open.select2-container--above .select2-selection--single{border-top:none;border-top-left-radius:0;border-top-right-radius:0;background-image:-webkit-linear-gradient(top, #fff 0%, #eee 50%);background-image:-o-linear-gradient(top, #fff 0%, #eee 50%);background-image:linear-gradient(to bottom, #fff 0%, #eee 50%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFFFF', endColorstr='#FFEEEEEE', GradientType=0)}.select2-container--classic.select2-container--open.select2-container--below .select2-selection--single{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0;background-image:-webkit-linear-gradient(top, #eee 50%, #fff 100%);background-image:-o-linear-gradient(top, #eee 50%, #fff 100%);background-image:linear-gradient(to bottom, #eee 50%, #fff 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFEEEEEE', endColorstr='#FFFFFFFF', GradientType=0)}.select2-container--classic .select2-selection--multiple{background-color:white;border:1px solid #aaa;border-radius:4px;cursor:text;outline:0}.select2-container--classic .select2-selection--multiple:focus{border:1px solid #5897fb}.select2-container--classic .select2-selection--multiple .select2-selection__rendered{list-style:none;margin:0;padding:0 5px}.select2-container--classic .select2-selection--multiple .select2-selection__clear{display:none}.select2-container--classic .select2-selection--multiple .select2-selection__choice{background-color:#e4e4e4;border:1px solid #aaa;border-radius:4px;cursor:default;float:left;margin-right:5px;margin-top:5px;padding:0 5px}.select2-container--classic .select2-selection--multiple .select2-selection__choice__remove{color:#888;cursor:pointer;display:inline-block;font-weight:bold;margin-right:2px}.select2-container--classic .select2-selection--multiple .select2-selection__choice__remove:hover{color:#555}.select2-container--classic[dir="rtl"] .select2-selection--multiple .select2-selection__choice{float:right}.select2-container--classic[dir="rtl"] .select2-selection--multiple .select2-selection__choice{margin-left:5px;margin-right:auto}.select2-container--classic[dir="rtl"] .select2-selection--multiple .select2-selection__choice__remove{margin-left:2px;margin-right:auto}.select2-container--classic.select2-container--open .select2-selection--multiple{border:1px solid #5897fb}.select2-container--classic.select2-container--open.select2-container--above .select2-selection--multiple{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.select2-container--classic.select2-container--open.select2-container--below .select2-selection--multiple{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--classic .select2-search--dropdown .select2-search__field{border:1px solid #aaa;outline:0}.select2-container--classic .select2-search--inline .select2-search__field{outline:0;box-shadow:none}.select2-container--classic .select2-dropdown{background-color:#fff;border:1px solid transparent}.select2-container--classic .select2-dropdown--above{border-bottom:none}.select2-container--classic .select2-dropdown--below{border-top:none}.select2-container--classic .select2-results>.select2-results__options{max-height:200px;overflow-y:auto}.select2-container--classic .select2-results__option[role=group]{padding:0}.select2-container--classic .select2-results__option[aria-disabled=true]{color:grey}.select2-container--classic .select2-results__option--highlighted[aria-selected]{background-color:#3875d7;color:#fff}.select2-container--classic .select2-results__group{cursor:default;display:block;padding:6px}.select2-container--classic.select2-container--open .select2-dropdown{border-color:#5897fb} 
.investor-switch .cb-enable span,.investor-switch .cb-disable span{
    line-height: 8px !important;
    padding: 4px 4px !important;
    padding-top: 5px !important;
}
.select2-dropdown{
    border-radius: 0px;
}
.search-area input[type="text"] {
    width: 290px !important;
    margin-right: -1px;
}
.search-area input[type="button"], .search-area input[type="submit"]{
    height: 27px;
}
.select2-container--default .select2-results__option[aria-selected=true] {
    background-color: #e0d9c4;
}
.select2-container--default .select2-results__option--highlighted[aria-selected] {
    background-color: #a2743a;
    color: white;
}
.select2-container--default .select2-selection--single{
    border: 1px solid #a2743a;
    border-radius: 0px;
}
.select2-container--default.select2-container--open .select2-selection--single .select2-selection__arrow b{
    border-color: #a2743a transparent transparent transparent;
}
.select2-container--default .select2-selection--single .select2-selection__arrow b{
    border-color: #000 transparent transparent transparent;
}
.select2-container--default .select2-selection--single .select2-selection__placeholder {
    color: #999;
    font-size: 13px;
}
.select2-container--default .select2-results__option--highlighted[aria-selected]:first-letter, .select2-results__option::first-letter, .select2-selection__rendered::first-letter {
    text-transform: uppercase;
}
.tooltipfordeal:hover span{
right: 16px;
    margin-top: 20px;
}
.dealuparrow{
  left: 55px;
}


</style>
<?php 

if(count($industry) == 0){ ?>
    <script>
        $(document).ready(function(){ 
            onsectordisable();
            $("#sltindustry").on('change',function(){
            if(($('#sltindustry').val())!=''||($('#sltindustry').val())!= null)
                {
                    /*$('.selectgroup.sltsector button').attr('style', 'width: 223px; background-color: #fff !important').prop("disabled", false);
                    $('.selectgroup.sltsubsector button').attr('style', 'width: 223px; background-color: #fff !important').prop("disabled", false);*/
                    onsectorenable();
                }
                
                
            });
            function onsectordisable(){
            $('.selectgroup.sltsector button.ui-multiselect').attr('style', 'width: 223px; background-color: #dddddd !important').prop("disabled",true);
            $('.selectgroup.sltsubsector button.ui-multiselect').attr('style', 'width: 223px; background-color: #dddddd !important').prop("disabled",true);
            }
            function onsectorenable(){
            $('.selectgroup.sltsector button.ui-multiselect').attr('style', 'width: 223px; background-color: #fff !important').prop("disabled",false);
            
            //$('.selectgroup.sltsubsector button.ui-multiselect').attr('style', 'width: 223px; background-color: #fff !important').prop("disabled",false);
            }
        });
    </script>
<?php } else if (count($industry) > 0 && count($sector) == 0){ ?>
    <script>
        $(document).ready(function(){ 
            $('.selectgroup.sltsubsector button.ui-multiselect').attr('style', 'width: 223px; background-color: #dddddd !important').prop("disabled",true);
        });
    </script>
<?php }  ?>
<script>
 // Company
 $(document).ready(function(){ 
    $("#firstrefine select, #firstrefine input").on('change',function(){
          $("#tagsearch").val("");
          $('#tagsearch_auto').val("");
      });    
    $("#invType,#invhead, #exitstatus1").on('change',function(){
          $("#tagsearch").val("");
          $('#tagsearch_auto').val("");
          $("#pesearch").submit();
      });
   });
    
   $(document).ready(function(){
                var popup_select = $('#popup_select').val();
                var advisor_type = $('#advisor_type').val();
                $( "#popup_select" ).change(function() {
                
                    $('#popup_keyword').val('');
                    $('#search_load').html('');
                    $("#popup_keyword").removeAttr('readonly');
                });
                    
                $( "#popup_keyword" ).keyup(function() {
                    var popup_select = $('#popup_select').val();
                    var advisor_type;
                    if(popup_select == 'legal_advisor'){
                            advisor_type = 'L';
                        }else if(popup_select == 'transaction_advisor'){
                            advisor_type = 'T';
                    }
                    $('#advisor_type').val(advisor_type);
                    
                    var search = $(this).val();
                    var vcflag = '<?php echo $VCFlagValueString; ?>';
                    var showallcompInvFlag = 5;
                    var peorvcflg = 4;

                    if(popup_select !='' && popup_select != "tags"){
                        
                        if(popup_select == 'legal_advisor' || popup_select == 'transaction_advisor'){
                            var tokenLimit = 1;
                        }else{
                            var tokenLimit = 100;
                        }
                        
                        $.ajax({
                            type: "post",
                            url: "ajaxPopupSearch.php",
                            data: {
                                type: advisor_type,
                                search: search,
                                select_type:popup_select,
                                vcflag : vcflag,
                                showallcompInvFlag : showallcompInvFlag,
                                peorvcflg : peorvcflg
                            },
                            success: function(data) {
                        
                                var innerdata=$.parseJSON(data);
                                var datacount = innerdata.length;   
                             console.log(innerdata);
                                
                                if(datacount>0) {
                                    
                                    var multiselect='';

                                    if(datacount>1){

                                        multiselect+='<label> <input style="width:auto !important;" type="checkbox" id="search_selectall"> SELECT ALL</label><br>';
                                    }
                                    $.each(innerdata, function (key, item) {

                                        multiselect+="<label style='clear: both;'><input type='checkbox' name='search_multi[]' value='"+item['id']+"' class='search_slt' data-title='"+item['name']+"' >"+item['name']+"</label></br>";

                                    });

                                    multiselect+="</br></br>"; 

                                    $("#search_load").fadeIn();
                                    $("#search_load").html(multiselect);
                                    disableFileds();
                                }
                                else{
                                    $("#search_load").fadeOut();
                                    $("#search_load").html('');
                                }
                            }
                        });
                    
                    }
                    
                });
                
                $('.search_slt').live("click", function() {  //on click 
                    
                    var sltholder='';
                    var sltsector_multi ='';
                    
                    var allChecked = $('.search_slt:checked').length === $('.search_slt').length;
                    $('#search_selectall').prop('checked', allChecked);
                    
                
                    $('.search_slt').each(function() { //loop through each checkbox

                        if(this.checked) {  
                            
                            var holder = $(this).data("title"); 
                            var slt_sec_name = $(this).val(); 

                            sltholder+=","+holder;   
                            sltsector_multi+=",'"+slt_sec_name+"'";  

                            $("#searchselector").show();
                        }

                    });
                    if($('.search_slt:checked').length > 0){
                        $("#popup_keyword").attr('readonly','readonly');  
                    }else{
                        $("#popup_keyword").removeAttr('readonly');
                    }
                    $("#popup_keyword").val(sltholder.substr(1));

                });
                
                $("#search_selectall").live("click", function() {
                

                    $('.search_slt').attr('checked',this.checked);
                    if(this.checked) 
                    {                              
                        var holder = $(this).val();                             
                        var sltholder='';
                        var sltsearch_multi ='';
                        var sltcount=0;
                        $('.search_slt').each(function() { //loop through each checkbox

                            if(this.checked) {                              
                            var holder = $(this).data("title"); 
                            var slt_search_name = $(this).val(); 

                                /*if(sltcount==0) { sltholder+=holder; sltcompany_multi+=slt_comp_id; }
                                else { sltholder+=","+holder;   sltcompany_multi+=","+slt_comp_id; }*/
                                sltholder+=","+holder;   
                                sltsearch_multi+=",'"+slt_search_name+"'";
                            sltcount++;
                            }
                        });
                        $("#popup_keyword").attr('readonly','readonly'); 
                        $("#popup_keyword").val(sltholder.substr(1));
                        //$("#popup_keyword").val(sltsearch_multi); 
                        $("#popup_keyword").fadeIn();
                        disableFileds();
                    }
                    else{
                        enableFileds();
                        //$("#search_load").fadeOut(); 
                        $("#popup_keyword").removeAttr('readonly');
                        $("#popup_keyword").val('');
                    }
                });
                
                $(document).on("click",function(e) {
             
                    if(e.target.id == "popup_keyword"  || e.target.id == "search_load" || $(e.target).parents('#search_load').length){
                        $('#search_load').show();
                    } else {
                        $('#search_load').hide();
                    }
                });
            
            });
 $(function() {
   
   $( "#asinvestorsearch" ).autocomplete({
      source: function( request, response ) {
        $.ajax({
            type: "POST",
            url: "autosuggestmanda.php",
            dataType: "json",
          data: {
            queryString: request.term,
            searchopt: 'investor',
            VCFlagValue: <?php echo $vcflagValue; ?>
          },
          success: function( data ) {
            response( $.map( data, function( item ) {
              return {
                label: item.investor,
                value: item.investor,
                 id: item.investor
              };
            }));
          }
        });
      },
      minLength: 2
      
    });
    
   $( "#ascompanysearch" ).autocomplete({
      source: function( request, response ) {
        $.ajax({
            type: "POST",
            url: "autosuggestmanda.php",
            dataType: "json",
          data: {
            queryString: request.term,
            searchopt: 'company',
            companyFlag: '<?php echo $companyFlag; ?>'
          },
          success: function( data ) {
            response( $.map( data, function( item ) {
              return {
                label: item.compName,
                value: item.compName,
                 id: item.compName
              }
            }));
          }
        });
      },
      minLength: 1
      
    }); 
    
    
    
        
    ////////////// investor search start //////////////////////
    
      $( "#investorauto" ).keyup(function() {
             
             var investorauto = $("#investorauto").val();
              
             if(investorauto.length > 2 ) {
                    $.ajax({
                       type: "post",
                     url: "autosuggestmanda.php",
                     data: {
                            queryString: investorauto,
                            searchopt: 'investor',
                            VCFlagValue: <?php echo $vcflagValue; ?>
                     },
                     success: function(data) {
                         
                        
                         
                         var innerdata=$.parseJSON(data);
                         var datacount = innerdata.length;   
                          
                          if(datacount>0) {
                              var multiselect='';
                              
                              if(datacount>1){
                                   multiselect+='<label> <input style="width:auto !important;" type="checkbox" id="inv_selectall"> SELECT ALL</label><br>';
                              }
                              
                            $.each(innerdata, function (key, item) {
                                
                               multiselect+="<label style='clear: both;'><input type='checkbox' name='investor_multi[]' value='"+item['investorid']+"' class='investor_slt' data-title='"+item['investor']+"' >"+item['investor']+"</label></br>";

                            });
                            
                            multiselect+="</br></br>"; 
                            
                            $("#investorauto_load").fadeIn();
                            $("#investorauto_load").html(multiselect);
                            
                            }
                            else {
                             $("#investorauto_load").fadeOut();
                            $("#investorauto_load").html('');
                            }
                     }
                   });

                 /*  $.post('chargefilter_autosuggest_test.php',{chargeholder:'test',xcxzc:'asdas'},function(data){
                       console.log(data);
                   }); */
        }
        else{
             $("#investorauto_load").fadeOut();
        }
        
    });    
    
        $("#inv_selectall").live("click", function() {
    
          
           clear_companysearch();
           clear_acquirersearch();
           clear_sectorsearch();
           clear_searchallfield();
            
            $('.investor_slt').attr('checked',this.checked);
            if(this.checked) 
            {                              
                var holder = $(this).val();                             
                var sltholder='';
                var sltinvestor_multi ='';
                var sltcount=0;
                $('.investor_slt').each(function() { //loop through each checkbox

                       if(this.checked) {                              
                          var holder = $(this).data("title"); 
                          var slt_inves_id = $(this).val(); 

                             if(sltcount==0) { sltholder+=holder; sltinvestor_multi+=slt_inves_id; }
                             else { sltholder+=","+holder;   sltinvestor_multi+=","+slt_inves_id; }

                          sltcount++;
                          
                           //sltuserscout++;
                       }

                  });
                  $("#investorauto").attr('readonly','readonly'); 
                  $("#investorauto").val(sltholder);
                  $("#keywordsearch_multiple").val(sltinvestor_multi); 
                  $("#inv_clearall").fadeIn();
             }
             else{
               //  sltcount=0;sltholder='';
                   $("#inv_clearall").fadeOut(); 
                   $("#investorauto").removeAttr('readonly');
                   $("#investorauto").val('');
             }
//                $("#investorauto").attr('readonly','readonly');  
//                $("#investorauto").val(sltholder); 
//                $("#investorauto_load").show();
        });    
    
      $('.investor_slt').live("click", function() {  //on click 
                      
          
          clear_companysearch();
          clear_acquirersearch();
          clear_sectorsearch();
          clear_searchallfield();
          
                      
                      var sltholder='';
                      var sltinvestor_multi ='';
                      var sltcount=0;
                      $('.investor_slt').each(function() { //loop through each checkbox
                          
                          if(this.checked) {                              
                                var holder = $(this).data("title"); 
                                var slt_inves_id = $(this).val(); 
                               
                                if(sltcount==0) { sltholder+=holder; sltinvestor_multi+=slt_inves_id;  }
                                else { sltholder+=","+holder;   sltinvestor_multi+=","+slt_inves_id;  }
                             
                             sltcount++;
                             $("#investorauto_load").show();
                              //sltuserscout++;
                          }
                          
                     });
                     
                    $("#investorauto").attr('readonly','readonly');  
                    $("#investorauto").val(sltholder); 
                    $("#keywordsearch_multiple").val(sltinvestor_multi); 
                    
                    
                    if(sltcount==0){  $("#inv_clearall").fadeOut(); $("#investorauto").removeAttr('readonly');   }
                    else {   $("#inv_clearall").fadeIn();  }
                        
        if($(".investor_slt").length==$(".investor_slt:checked").length){
            
            $("#inv_selectall").attr("checked","checked");
        }else{
            $("#inv_selectall").removeAttr("checked");
        }
                     
                 
             });
             
     ////////////// investor search end //////////////////////        
     
        
    
    
     ////////////// company search start //////////////////////    
    
     $( "#companyauto" ).keyup(function() {
             
             var companyauto = $("#companyauto").val();
              
             if(companyauto.length > 2 ) {
                    $.ajax({
                       type: "post",
                     url: "autosuggestmanda.php",
                     data: {
                                queryString: companyauto,
                                searchopt: 'company',
                                companyFlag: '<?php echo $companyFlag; ?>'
                     },
                     success: function(data) {
                          
                         var innerdata=$.parseJSON(data);
                         var datacount = innerdata.length;   
                         
                          if(datacount>0) {
                              var multiselect='';
                              
                              if(datacount>1){
                                   multiselect+='<label> <input style="width:auto !important;" type="checkbox" id="com_selectall"> SELECT ALL</label><br>';
                                }
                            $.each(innerdata, function (key, item) {
                                
                               multiselect+="<label style='clear: both;'><input type='checkbox' name='company_multi[]' value='"+item['companyid']+"' class='company_slt' data-title='"+item['compName']+"' >"+item['compName']+"</label></br>";

                            });
                            
                            multiselect+="</br></br>"; 
                            
                            $("#companyauto_load").fadeIn();
                            $("#companyauto_load").html(multiselect);
                            disableFileds();
                            }
                            else{
                            $("#companyauto_load").fadeOut();
                            $("#companyauto_load").html('');
                            }
                     }
                   });

                 /*  $.post('chargefilter_autosuggest_test.php',{chargeholder:'test',xcxzc:'asdas'},function(data){
                       console.log(data);
                   }); */
        }
        else{
             $("#companyauto_load").fadeOut();
        }
        
    });
    
      $("#com_selectall").live("click", function() {
    
           
            $("#investorauto_sug").tokenInput("clear",{focus:false});
             //clear_keywordsearch();
             clear_acquirersearch();
             clear_sectorsearch();
             clear_searchallfield();
            // clear_searchallfield();
            $('#keywordsearch,#sectorsearch,#asadvisorsearch_legal,#asadvisorsearch_trans,#searchallfield').val("");
            $('#investorauto,#sectorauto,#asadvisorsearch_legalauto,#asadvisorsearch_transauto').val("");
            
            $('.company_slt').attr('checked',this.checked);
            if(this.checked) 
            {                              
                var holder = $(this).val();                             
                var sltholder='';
                var sltcompany_multi ='';
                var sltcount=0;
                $('.company_slt').each(function() { //loop through each checkbox

                       if(this.checked) {                              
                          var holder = $(this).data("title"); 
                          var slt_comp_id = $(this).val(); 

                             if(sltcount==0) { sltholder+=holder; sltcompany_multi+=slt_comp_id; }
                             else { sltholder+=","+holder;   sltcompany_multi+=","+slt_comp_id; }

                          sltcount++;
                         
                       }

                  });
                  $("#companyauto").attr('readonly','readonly'); 
                  $("#companyauto").val(sltholder);
                  $("#companysearch").val(sltcompany_multi); 
                  $("#com_clearall").fadeIn();
                    disableFileds();
             }
             else{
                    enableFileds();
               //  sltcount=0;sltholder='';
                   $("#com_clearall").fadeOut(); 
                   $("#companyauto").removeAttr('readonly');
                   $("#companyauto").val('');
             }
        });
    
          $('.company_slt').live("click", function() {  //on click 
                      
                      $("#investorauto_sug").tokenInput("clear",{focus:false});
                       //clear_keywordsearch();
                       clear_acquirersearch();
                       clear_sectorsearch();
                       clear_searchallfield();
                       // clear_searchallfield();
                       $('#keywordsearch,#sectorsearch,#asadvisorsearch_legal,#asadvisorsearch_trans,#searchallfield').val("");
                       $('#investorauto,#sectorauto,#asadvisorsearch_legalauto,#asadvisorsearch_transauto').val("");                       
                      
                      var sltholder='';
                      var sltcompany_multi ='';
                      var sltcount=0;
                      $('.company_slt').each(function() { //loop through each checkbox
                          
                          if(this.checked) {                              
                                var holder = $(this).data("title"); 
                                var slt_comp_id = $(this).val(); 
                               
                                if(sltcount==0) { sltholder+=holder; sltcompany_multi+=slt_comp_id;  }
                                else { sltholder+=","+holder;   sltcompany_multi+=","+slt_comp_id;  }
                             
                             sltcount++;
                             $("#companyauto_load").show();
                              //sltuserscout++;
                          }
                          
                     });
                     
            
                    disableFileds();
                    $("#companyauto").attr('readonly','readonly');  
                    $("#companyauto").val(sltholder); 
                    $("#companysearch").val(sltcompany_multi); 
                    
                    
                    if(sltcount==0){  $("#com_clearall").fadeOut(); $("#companyauto").removeAttr('readonly');   }
                    else {   $("#com_clearall").fadeIn();  }
                        
        if($(".company_slt").length==$(".company_slt:checked").length){
            $("#com_selectall").attr("checked","checked");
        }else{
            $("#com_selectall").removeAttr("checked");
        }
                     
                 
             });
    
    ////////////// company search end //////////////////////
    
    
    
    
    
    
    ////////////// acquirer search start //////////////////////    
    
     $( "#acquirerauto" ).keyup(function() {
             
             var acquirerauto = $("#acquirerauto").val();
              
             if(acquirerauto.length > 2 ) {
                    $.ajax({
                       type: "post",
                     url: "autoacquirers.php",
                     data: {
                                queryString: acquirerauto
                     },
                     success: function(data) {
                          
                         var innerdata=$.parseJSON(data);
                         var datacount = innerdata.length;   
                         
                          if(datacount > 0) {
                              var multiselect='';
                              
                              if(datacount>1){
                                   multiselect+='<label> <input style="width:auto !important;" type="checkbox" id="acq_selectall"> SELECT ALL</label><br>';
                                }
                            $.each(innerdata, function (key, item) {
                                
                               multiselect+="<label style='clear: both;'><input type='checkbox' name='acquirer_multi[]' value='"+item['acquirerid']+"' class='acquirer_slt' data-title='"+item['acquirer']+"' >"+item['acquirer']+"</label></br>";

                            });
                            
                            multiselect+="</br></br>"; 
                            
                            $("#acquirerauto_load").fadeIn();
                            $("#acquirerauto_load").html(multiselect);
                            disableFileds();
                            $("#tagsearch").val("");
                            $('#tagsearch_auto').val("");
                            }
                            else{
                                console.log("ddddddddddddddddddddddd");
                                $("#acquirerauto_load").fadeIn();
                                $("#acquirerauto_load").html('<label style="clear: both;">No Acquirer found</label>');
                            }
                     }
                   });

                 /*  $.post('chargefilter_autosuggest_test.php',{chargeholder:'test',xcxzc:'asdas'},function(data){
                       console.log(data);
                   }); */
        }
        else{
             $("#acquirerauto_load").fadeOut();
        }
        
    });
    
      $("#acq_selectall").live("click", function() {
            
            $("#investorauto_sug").tokenInput("clear",{focus:false});
             //clear_keywordsearch();
             clear_companysearch();
             clear_sectorsearch();
             clear_searchallfield();
             // clear_searchallfield();
             $('#keywordsearch,#sectorsearch,#asadvisorsearch_legal,#asadvisorsearch_trans,#searchallfield').val("");
             $('#investorauto,#sectorauto,#asadvisorsearch_legalauto,#asadvisorsearch_transauto').val("");   
             
            $('.acquirer_slt').attr('checked',this.checked);
            if(this.checked) 
            {                              
                var holder = $(this).val();                             
                var sltholder='';
                var sltacquirer_multi ='';
                var sltcount=0;
                $('.acquirer_slt').each(function() { //loop through each checkbox

                       if(this.checked) {                              
                          var holder = $(this).data("title"); 
                          var slt_acq_id = $(this).val(); 

                             if(sltcount==0) { sltholder+=holder; sltacquirer_multi+=slt_acq_id; }
                             else { sltholder+=","+holder;   sltacquirer_multi+=","+slt_acq_id; }

                          sltcount++;
                         
                       }

                  });
                  $("#acquirerauto").attr('readonly','readonly'); 
                  $("#acquirerauto").val(sltholder);
                  $("#acquirersearch").val(sltacquirer_multi); 
                  $("#acq_clearall").fadeIn();
                  disableFileds();
             }
             else{
               //  sltcount=0;sltholder='';
                   $("#acq_clearall").fadeOut(); 
                   $("#acquirerauto").removeAttr('readonly');
                   $("#acquirerauto").val('');
                   enableFileds();
             }
        });
    
          $('.acquirer_slt').live("click", function() {  //on click 
                      
                      $("#investorauto_sug").tokenInput("clear",{focus:false});
                       //clear_keywordsearch();
             clear_companysearch();
             clear_sectorsearch();
             clear_searchallfield();
             // clear_searchallfield();
             $('#keywordsearch,#sectorsearch,#asadvisorsearch_legal,#asadvisorsearch_trans,#searchallfield').val("");
             $('#investorauto,#sectorauto,#asadvisorsearch_legalauto,#asadvisorsearch_transauto').val("");  
                      
                      var sltholder='';
                      var sltacquirer_multi ='';
                      var sltcount=0;
                      $('.acquirer_slt').each(function() { //loop through each checkbox
                          
                          if(this.checked) {                              
                                var holder = $(this).data("title"); 
                                var slt_acq_id = $(this).val(); 
                               
                                if(sltcount==0) { sltholder+=holder; sltacquirer_multi+=slt_acq_id;  }
                                else { sltholder+=","+holder;   sltacquirer_multi+=","+slt_acq_id;  }
                             
                             sltcount++;
                             $("#acquirerauto_load").show();
                              //sltuserscout++;
                          }
                          
                     });
                     
                    $("#acquirerauto").attr('readonly','readonly');  
                    $("#acquirerauto").val(sltholder); 
                    $("#acquirersearch").val(sltacquirer_multi); 
                    
                    
                    if(sltcount==0){  $("#acq_clearall").fadeOut(); $("#acquirerauto").removeAttr('readonly');   }
                    else {   $("#acq_clearall").fadeIn();  }
                        
        if($(".acquirer_slt").length==$(".acquirer_slt:checked").length){
            
            $("#acq_selectall").attr("checked","checked");
        }else{
            $("#acq_selectall").removeAttr("checked");
        }
                     
                 
             });
    
    ////////////// acquirer search end //////////////////////
    
    
    
    
      ////////////// sector search start //////////////////////
    
      $( "#sectorauto" ).keyup(function() {
             
             var sectorauto = $("#sectorauto").val();
              
             if(sectorauto.length > 2 ) {
                    $.ajax({
                       type: "post",
                     url: "autosuggestmanda.php",
                     data: {
                        queryString: sectorauto,
                        searchopt: 'sector'
                     },
                     success: function(data) {
                         
                          var innerdata=$.parseJSON(data);
                         var datacount = innerdata.length;   
                          
                          if(datacount>0) {
                              var multiselect='';
                              
                              if(datacount>1){
                          
                         //   multiselect+='<label> <input style="width:auto !important;" type="checkbox" id="sec_selectall"> SELECT ALL</label><br>';
                            }
                            $.each(innerdata, function (key, item) {
                                
                               multiselect+="<label style='clear: both;'><input type='checkbox' name='sector_multi[]' value='"+item['sectorName']+"' class='sector_slt' data-title='"+item['sectorName']+"' >"+item['sectorName']+"</label></br>";

                            });
                            
                            multiselect+="</br></br>"; 
                            
                            $("#sectorauto_load").fadeIn();
                            $("#sectorauto_load").html(multiselect);
                            }
                            else{
                                $("#sectorauto_load").fadeOut();
                                $("#sectorauto_load").html('');
                            }
                     }
                   });

                 /*  $.post('chargefilter_autosuggest_test.php',{chargeholder:'test',xcxzc:'asdas'},function(data){
                       console.log(data);
                   }); */
        }
        else{
             $("#sectorauto_load").fadeOut();
        }
        
    });    
    
     
      $('.sector_slt').live("click", function() {  //on click 
         
        
         if($(".sector_slt:checked").length >  10){
            
             this.checked = false;
             alert('Please select only 10 Sectors');
             return false;
        }
            $("#investorauto_sug").tokenInput("clear",{focus:false});
            $("#companyauto_sug").tokenInput("clear",{focus:false});          
            //clear_keywordsearch();
            clear_companysearch();
            clear_acquirersearch();
            clear_searchallfield();
            $('#keywordsearch,#companysearch,#asadvisorsearch_legal,#asadvisorsearch_trans').val("");
            $('#investorauto,#companyauto,#asadvisorsearch_legalauto,#asadvisorsearch_transauto').val("");
                      
                      var sltholder='';
                      var sltsector_multi ='';
                      var sltcount=0;
                      $('.sector_slt').each(function() { //loop through each checkbox
                          
                          if(this.checked) {                              
                                var holder = $(this).data("title"); 
                                var slt_sec_name = $(this).val(); 
                               
                                if(sltcount==0) { sltholder+=holder; sltsector_multi+="'"+slt_sec_name+"'";  }
                                else { sltholder+=","+holder;   sltsector_multi+=", '"+slt_sec_name+"'";  }
                             
                             sltcount++;
                             $("#sectorauto_load").show();
                              //sltuserscout++;
                          }
                          
                     });
                     
                    $("#sectorauto").attr('readonly','readonly');  
                    $("#sectorauto").val(sltholder); 
                    $("#sectorsearch_multiple").val(sltsector_multi); 
                    disableFileds();
                    
                    
                    if(sltcount==0){  $("#sec_clearall").fadeOut(); $("#sectorauto").removeAttr('readonly');   }
                    else {   $("#sec_clearall").fadeIn();  }
                        
//        if($(".sector_slt").length==$(".sector_slt:checked").length){
//            
//            $("#sec_selectall").attr("checked","checked");
//        }else{
//            $("#sec_selectall").removeAttr("checked");
//        }
                     
                 
             });
     
    ////////////// sector search end //////////////////////
    
    
    
    $( "#assectorsearch_old" ).autocomplete({
      source: function( request, response ) {
        $.ajax({
            type: "POST",
            url: "autosuggestmanda.php",
            dataType: "json",
          data: {
            queryString: request.term,
            searchopt: 'sector'
          },
          success: function( data ) {
            response( $.map( data, function( item ) {
              return {
                label: item.sectorName,
                value: item.sectorName,
                 id: item.sectorName
              }
            }));
          }
        });
      },
      minLength: 1
      
    }); 
    
    $( "#asadvisorsearch_legal" ).autocomplete({
      source: function( request, response ) {
        $.ajax({
            type: "POST",
            url: "autosuggestmanda.php",
            dataType: "json",
          data: {
            queryString: request.term,
            searchopt: 'lgadvisor',
            VCFlagValue: <?php echo $vcflagValue; ?>
          },
          success: function( data ) {
            response( $.map( data, function( item ) {
              return {
                label: item.ladvisor,
                value: item.ladvisor,
                 id: item.ladvisor
              }
            }));
          }
        });
      },
      minLength: 1,
      select: function( event, ui ) {
       $('#asadvisorsearch_legal').val(ui.item.value);
       $('#keywordsearch_sug,#companysearch,#companysearch,#sectorsearch,#asadvisorsearch_trans,#searchallfield,#tagsearch').val("");
       $('#investorauto,#companyauto,#sectorsearchauto,#acquirerauto,#tagsearch_auto').val("");
       $("#investorauto_sug").tokenInput("clear",{focus:false});
       $("#companyauto_sug").tokenInput("clear",{focus:false});
       //clear_keywordsearch();
       clear_companysearch();
       clear_sectorsearch();
       clear_searchallfield();
            disableFileds();
//       $('#form').submit();
      },
      open: function() {
//        $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
      },
      close: function() {
          if( $('#asadvisorsearch_legal').val()=="") 
             $( "#asadvisorsearch_legal" ).val('');  
       //  enableFileds();
//        $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
      }
      
    }); 
    
    
    $( "#asadvisorsearch_trans" ).autocomplete({
      source: function( request, response ) {
        $.ajax({
            type: "POST",
            url: "autosuggestmanda.php",
            dataType: "json",
          data: {
            queryString: request.term,
            searchopt: 'trsadvisor',
            VCFlagValue: <?php echo $vcflagValue; ?>
          },
          success: function( data ) {
            response( $.map( data, function( item ) {
              return {
                label: item.tadvisor,
                value: item.tadvisor,
                 id: item.tadvisor
              }
            }));
          }
        });
      },
      minLength: 1,
      select: function( event, ui ) {
       $('#asadvisorsearch_trans').val(ui.item.value);
       $('#keywordsearch_sug,#companysearch,#sectorsearch,#asadvisorsearch_legal,#searchallfield,#tagsearch').val("");
       $('#investorauto,#companyauto,#sectorsearchauto,#acquirerauto,#tagsearch_auto').val("");
       $("#investorauto_sug").tokenInput("clear",{focus:false});
       $("#companyauto_sug").tokenInput("clear",{focus:false});
       //clear_keywordsearch();
       clear_companysearch();
       clear_sectorsearch();
       clear_searchallfield();
            disableFileds();
//       $('#form').submit();
      },
      open: function() {
//        $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
      },
      close: function() {
          if( $('#asadvisorsearch_trans').val()=="") 
             $( "#asadvisorsearch_trans" ).val('');  
       //  enableFileds();
//        $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
      }
      
    }); 
     
  //   $( "#tagsearch_auto" ).autocomplete({
        
  //       source: function( request, response ) {
  //           $('#tagesearch').val('');
  //           $.ajax({
  //               type: "POST",
  //               url: "ajaxTagsearch.php",
  //               dataType: "json",
  //               data: {
  //                   search: request.term,
  //               },
  //               success: function( data ) {
  //                   response( $.map( data, function( item ) {
  //                     return {
  //                           label: item.label,
  //                           value: item.value,
  //                           id: item.id
  //                     }
  //                   }));
  //               }
  // });
  //       },
  //       minLength: 2,
  //       select: function( event, ui ) {
  
  //           $('#tagsearch').val(ui.item.value);
  //           $('#keywordsearch,#companysearch,#sectorsearch,#advisorsearch_trans,#advisorsearch_legal,#searchallfield').val("");
  //           $('#investorauto,#companyauto,#sectorsearchauto,#advisorsearch_transauto,#advisorsearch_legalauto').val("");
  //           $("#investorauto_sug").tokenInput("clear",{focus:false});
  //           $("#companyauto_sug").tokenInput("clear",{focus:false});
  //           //clear_keywordsearch();
  //           clear_companysearch();
  //           clear_sectorsearch();
  //           clear_searchallfield();
  //           $(this).parents("form").submit();
  //       },
  //       open: function() {
  // //        $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
  //       },
  //       close: function() {
  //           if( $('#tagsearch').val()=="") 
  //           $( "#tagsearch_auto" ).val('');
  //       }
  //   });

  $("#tagsearch_auto").tokenInput("ajaxTagsearch.php",{
            theme: "facebook",
            minChars:2,
            queryParam: "pe_cq",
            hintText: "",
            noResultsText: "No Result Found",
            preventDuplicates: true,
            onAdd: function (item) {
                var tags="";
                var selectedValues = $('#tagsearch_auto').tokenInput("get");
                for (let index = 0; index < selectedValues.length; index++) {
                    tags += selectedValues[index].name;
                    tags += ',';
                }
                $('#tagsearch').attr("value","");
                $('#tagsearch_auto').attr("value",tags.substring(0,tags.length - 1));
            },
            onDelete: function (item) {
                    var selectedValues = $('#tagsearch_auto').tokenInput("get");
                    var inputCount = selectedValues.length;
                    var tags="";
                    if(inputCount==0){ 
                        $('#tagsearch_auto').val("");
                        $('#tagsearch').val("");
                    } else {
                        for (let index = 0; index < selectedValues.length; index++) {
                           tags += selectedValues[index].name;
                           tags += ',';
                        }
                        $('#tagsearch').attr("value","");
                        $('#tagsearch_auto').attr("value",tags.substring(0,tags.length - 1));
                        //$('#tagsearch').attr("value",tags.substring(0,tags.length - 1));
                    }
        },
            prePopulate :<?php if($tag_response!=''){echo   $tag_response; }else{ echo 'null'; } ?>
    });

  });



 </script>
 
<?php 
      $showdealsbyflag=0;
    /*if(($advisorsearchstring_legal!=" " && $advisorsearchstring_legal!="")  || ($advisorsearchstring_trans!=" " && $advisorsearchstring_trans!="") || ($companysearch!=" " && $companysearch!="") || 
        ($investorsearch!=" " && $investorsearch!="") || ($sectorrsearch!=" " && $sectorsearch!="") || ($acquirersearch!=" " && $acquirersearch!="")){
        $showdealsbyflag=1; 
         $disable_flag = "1";
    $background = "#dddddd  !important"; 
    }else{
    $disable_flag = "0";
    $background = "#ffffff";          
    } */
    if(($advisorsearchstring_legal!=" " && $advisorsearchstring_legal!="")  || ($advisorsearchstring_trans!=" " && $advisorsearchstring_trans!="") || ($acquirersearch!=" " && $acquirersearch!="") ){
        $showdealsbyflag=1; 
         $disable_flag = "1";
    $background = "#dddddd  !important"; 
    }else{
    $disable_flag = "0";
    $background = "#ffffff";          
    }

    ?>
    <form method="post" action="" name="refinesearchform" id="refinesearchform">
<!-- Tag Search -->
<h2 class="acc_trigger helptag" style="width: 100%;">
    <a href="#" style="display: inline-block;">Tag Search</a>
    <!-- <span class="helplineTag helplinetagicon" style="margin-top: -24px !important;"> 
        <a  class="help-icon1 tooltip tagpopup">
            <i class="far fa-question-circle" style="color: #fff;background-image: none;"></i>
            <span style="right: 18% !important;">
                <img class="showtextlarge" src="images/callout.gif" style="left: 50px;">
                    Tag List
            </span>
        </a>
    </span>  -->
</h2>
<div  class="acc_container " style="display: none;">
    <div class="block">
        <ul > 
            <?php if($_POST['tagsearch']){
                $tagauto = $_POST['tagsearch'];            
            } ?>
            <li class="ui-widget">
                <input type="hidden" id="tagsearch" name="tagsearch" value="<?php echo  $tagsearch;  ?>" placeholder="" style="width:220px;">
                <input type="text" id="tagsearch_auto" name="tagsearch_auto" value="<?php echo  $tagsearch;  ?>" placeholder="" style="width:220px;"> 
                <input type="hidden" id="tagradio" name="tagradio" value="<?php if($tagandor!=''){echo $tagandor;}else {echo 0;}?>" placeholder="" style="width:220px;"> 
            </li>
            <li class="tagpadding">
                <div class="btn-cnt"> 
                    <div class="switchtag-and-or"> 
                        <input type="radio" id="and" value="0" name="tagandor" class="hidden-field" checked="checked"/><span class="custom radio "></span>
                        <input type="radio" value="1" id="or" name="tagandor" class="hidden-field"/><span class="custom radio "></span>
                        <label for="and" class="cb-enable "><span>AND</span></label>
                        <label for="or" class="cb-disable"><span>OR</span></label>
                    </div>
                </div>
                <input type="button" name="fliter_stage" value="Filter" onclick="this.form.submit();" style="float: right;">
            </li>
        </ul>
    </div>
</div>
<span class="helplineTag helplinetagicon" style="margin-top: -24px !important;position: absolute;
    right: 40px;    top: 34px;"> 
        <a  class="help-icon1 tooltip tagpopup">
        <i class="far fa-question-circle" style="color: #fff;background-image: none;"></i>
            <span style="right: 0% !important;width: 55px;box-shadow: 2px 1px 3px 0px rgba(255, 255, 255, 0.5);padding-right: 10px;">
                <img class="showtextlarge" src="images/callout.gif" style="left: 40px;">
                    TAG LIST
            </span>
        </a>
    </span> 

<!-- Tag Search -->
<h2 class="acc_trigger"><a href="#">Refine Search</a></h2>


  <div class="acc_container" id="firstrefine">
     <input type="hidden" name='filtersector' id="filtersector" value="<?php echo $filtersector; ?>" />
    <input type="hidden" name='filtersubsector' id="filtersubsector" value="<?php echo $filtersubsector; ?>" />
    <div class="block">
      <ul >
 <li class="even"><h4>Industry</h4>
<div class="selectgroup">  
    <select name="industry[]" multiple="multiple"  id="sltindustry" style=" background: <?php echo $background; ?>;" <?php if($disable_flag == "1"){ echo "disabled"; } ?>>
    <!--<OPTION id=0 value="--" selected> Select an Industry </option>-->
    <?php
       $industrysql="select industryid,industry from industry where industryid IN (".$_SESSION['PE_industries'].")  " . $hideIndustry ." order by industry";
        if ($industryrs = mysql_query($industrysql))
        {
         $ind_cnt = mysql_num_rows($industryrs);
        }
        if($ind_cnt>0)
        {
                                    While($myrow=mysql_fetch_array($industryrs, MYSQL_BOTH))
                                    {
                                            $id = $myrow[0];
                                            $name = $myrow[1];
                                            if(count($industry) > 0){
                                                $indSel = (in_array($id,$industry))?'selected':''; 
                                            }else{
                                                $indSel =''; 
                                            }
                                            echo "<OPTION id='industry_".$id. "' value=".$id." ".$indSel.">".$name."</OPTION>";
                                    }
                                    mysql_free_result($industryrs);
        }
        ?>
    </select>
</div>
</li>
<li class="odd"><h4>Sector</h4>
                <div class="selectgroup sltsector">
                    <select name="sector[]" multiple="multiple" id="sltsector" style=" background: <?php echo $background; ?>;" <?php if($disable_flag == "1"){ echo "disabled"; }?>>
                    <?php
                        if ($sectorrs = mysql_query($sectorsql))
                        {
                         $sector_cnt = mysql_num_rows($sectorrs);
                        }

                        if($sector_cnt>0)
                        {
                            
                                 While($myrow=mysql_fetch_array($sectorrs, MYSQL_BOTH))
                                {
                                    $id = $myrow[0];
                                    $name = $myrow[1];
                                    if(count($sector)>0)
                                    {
                                        
                                        $indSel = (in_array($id,$sector))?'selected':''; 
                                        echo "<OPTION class='sectorlist' id='sector_".$id. "' value=".$id." ".$indSel.">".$name."</OPTION> \n";
                                    }
                                    else
                                    {
                                        echo "<OPTION class='sectorlist' id='sector_".$id. "' value=".$id." >".$name."</OPTION> \n";
                                    }
                                    

                                }
                                mysql_free_result($sectorrs);
                        }
                    ?>
                    </select>
                </div>
            </li>

            <li class="even"><h4>Sub Sector</h4>
                <div class="selectgroup sltsubsector" >
                    <select name="subsector[]" multiple="multiple" id="sltsubsector" style=" background: <?php echo $background; ?>;" <?php if($disable_flag == "1"){ echo "disabled"; }?>>
                    <?php
                        if ($subsectorrs = mysql_query($subsectorsql))
                        {
                         $subsector_cnt = mysql_num_rows($subsectorrs);
                        }

                        if($subsector_cnt>0)
                        {
                                While($myrow=mysql_fetch_array($subsectorrs, MYSQL_BOTH))
                                {
                                    $name = $myrow[0];
                                    if(count($subsector)>0)
                                    {
                                        
                                        $indSel = (in_array($name,$subsector))?'selected':''; 
                                        echo "<OPTION class='subsectorlist' id='subsector_".$name. "' value='".$name."' ".$indSel.">".$name."</OPTION> \n";
                                    }
                                    else
                                    {
                                        echo "<OPTION class='subsectorlist' id='subsector_".$name. "' value='".$name."' >".$name."</OPTION> \n";
                                    }
                                    

                                }
                                mysql_free_result($subsectorrs);
                        }
                    ?>
                    </select>
                </div>
            </li>

<?php  if($hide_pms==0)
                  { ?>
<li class="even"><h4>Deal Type
      <span ><a href="#popup5" class="help-icon1 tooltip"><img width="18" height="18" border="0" src="images/help.png" alt="" style="vertical-align:middle">
                                             <span>
                                             <img class="callout1" src="images/callout.gif">
                                             Definitions
                                             </span>
     </a></span></h4>
<div class="selectgroup">    
    <SELECT name="dealtype[]" multiple="multiple" id="dealtype" style=" background: <?php echo $background; ?>;" <?php if($disable_flag == "1"){ echo "disabled"; } ?>>
        <!--<OPTION id=1 value="--" selected>ALL </option>-->
        <?php
          $dealtypesql = "select DealTypeId,DealType from dealtypes where hide_for_exit=".$hide_pms;
            if ($rsdealtype = mysql_query($dealtypesql))
            {
              $stage_cnt = mysql_num_rows($rsdealtype);
            }
            if($stage_cnt > 0)
               {
               While($myrow=mysql_fetch_array($rsdealtype, MYSQL_BOTH))
              {
                $id = $myrow[0];
                $name = $myrow[1];
                                                                if(count($dealtype) >0){
                                                                    $isselcted = (in_array($id,$dealtype))?'selected':'';
                                                                }else{
                                                                    $isselcted ='';
                                                                }
                echo "<OPTION id=".$id. " value=".$id." ".$isselcted.">".$name."</OPTION> \n";
              }
             mysql_free_result($rsdealtype);
          }
    ?>
    </select>
</div>
</li>
                  <?php } ?>

  
<?php 
$page_name = basename($_SERVER['PHP_SELF']);
if($page_name == 'mandadealdetails.php'){
    if(isset($_REQUEST['value'])) 
    { 
        $strvalue = explode("/", $value);
        $SelCompRef1=$strvalue[0];
        $flagvalue1=$strvalue[1];
        $searchstring=$strvalue[2];
        $value = $flagvalue1;
    }
}else{
    if(isset($_REQUEST['value'])) 
    {
        $value = $_REQUEST['value'];
    }    
} 
    if($value=='0-1' || $value=='1-1') 
    { 
      if(isset($_POST["InType"])) { $types=$_POST["InType"]; } else { $types=""; }
?>
  <li class="odd">
    <h4> Type </h4>
    <SELECT NAME="InType" id="InType" style=" background: <?php echo $background; ?>;" <?php if($disable_flag == "1"){ echo "disabled"; } ?>>
      <option value=""> ALL </option>
      <option value="1" <?php if($types==1) { echo "selected"; } ?>> IPO </option>
      <option value="2" <?php if($types==2) { echo "selected"; } ?>> Open Market Transaction </option>
      <option value="3" <?php if($types==3) { echo "selected"; } ?>> Reverse Merger </option>
    </SELECT>
  </li>


<?php } ?>

<?php  if($value=='0-2')
                  {
                  $hide_pms=0; ?>
<li class="even"><h4>Deal Type - M&A (PE-VC)
      <span ><a href="#popup5" class="help-icon1 tooltip tooltipfordeal"><img width="18" height="18" border="0" src="images/help.png" alt="" style="vertical-align:middle">
                                             <span>
                                             <img class="showtextlarge dealuparrow" src="images/callout.gif">
                                             Definitions
                                             </span>
     </a></span></h4>
<div class="selectgroup dealtype">    
    <SELECT name="dealtype[]" multiple="multiple" id="dealtype" style=" background: <?php echo $background; ?>;" <?php if($disable_flag == "1" ){ echo "disabled"; } ?>>
        <!--<OPTION id=1 value="--" selected>ALL </option>-->
        <?php
          $dealtypesql = "select DealTypeId,DealType from dealtypes where hide_for_exit=".$hide_pms;
            if ($rsdealtype = mysql_query($dealtypesql))
            {
              $stage_cnt = mysql_num_rows($rsdealtype);
            }
            if($stage_cnt > 0)
               {
               While($myrow=mysql_fetch_array($rsdealtype, MYSQL_BOTH))
              {
                $id = $myrow[0];
                $name = $myrow[1];
                                                                if(count($dealtype) >0){
                                                                    $isselcted = (in_array($id,$dealtype))?'selected':'';
                                                                }else{
                                                                    $isselcted ='';
                                                                }
                echo "<OPTION id=".$id. " value=".$id." ".$isselcted.">".$name."</OPTION> \n";
              }
             mysql_free_result($rsdealtype);
          }
    ?>
    </select>
</div>
</li>
                  <?php } ?>

  
<?php 
    if($value=='0-2') 
    { 
      if(isset($_POST["InType"])) { $types=$_POST["InType"]; } else { $types=""; }
?>
  <li class="odd">
    <h4> Type - Public Market (PE-VC)</h4>
    <SELECT NAME="InType" id="InType" style=" background: <?php echo $background; ?>;" <?php if($disable_flag == "1" || $dealtype!=""){ echo "disabled"; }else{ echo "";} ?>>
      <option value="--"> ALL </option>
      <option value="1" <?php if($types==1) { echo "selected"; } ?>> IPO </option>
      <option value="2" <?php if($types==2) { echo "selected"; } ?>> Open Market Transaction </option>
      <option value="3" <?php if($types==3) { echo "selected"; } ?>> Reverse Merger </option>
    </SELECT>
  </li>


<?php } ?>



<li class="odd"><h4>Investor Type<span><a href="#popup3" class="help-icon1 tooltip"><img width="18" height="18" border="0" src="images/help.png" alt="" style="vertical-align:middle">
                                             <span>
                                             <img class="callout1" src="images/callout.gif">
                                             Definitions
                                             </span>
     </a></span></h4>
                <SELECT NAME="invType" id="invType" style=" background: <?php echo $background; ?>;" <?php if($disable_flag == "1"){ echo "disabled"; } ?>>
                 <OPTION id=5 value="--" selected> ALL </option>
                 <?php
                        /* populating the incubator status from the incstatus table */
                        $invtypesql = "select InvestorType,InvestorTypeName from investortype where Hide=0";    
                            if ($invtypers = mysql_query($invtypesql))
                            {
                       $invtype_cnt = mysql_num_rows($invtypers);
                            }
                              if($invtype_cnt >0)
                            {
                             While($myrow=mysql_fetch_array($invtypers, MYSQL_BOTH))
                            {
                                    $id = $myrow["InvestorType"];
                                    $name = $myrow["InvestorTypeName"];
                                    $isselcted = ($id==$_POST['invType']) ? 'SELECTED' : '';
                                     echo "<OPTION id=".$id. " value=".$id." ".$isselcted." >".$name."</OPTION> \n";
                            }
                 mysql_free_result($invtypers);
                }
        ?>
             </SELECT>
</li>
<li class="odd "><h4>Investor Headquarters
    </h4>
    <SELECT NAME="invhead" id="invhead" style=" background: <?php echo $background; ?>;" <?php if($disable_flag == "1"){ echo "disabled"; } ?>>
       <OPTION id="5" value="--" selected> ALL </option>
         <?php
            /* populating the investortype from the investortype table */
            $countrysql = "SELECT DISTINCT (peinvestors.countryid),country.country from peinvestors JOIN country on country.countryid=peinvestors.countryid and country.country!='' and country.country!='--' ORDER BY country ASC";
            if ($countryquery = mysql_query($countrysql)){
               $country_cnt = mysql_num_rows($countryquery);
            }
            if($country_cnt >0){
                While($myrow=mysql_fetch_array($countryquery, MYSQL_BOTH)){
                    $id = $myrow["countryid"];
                    $countryname = $myrow["country"];
                       /* if($regionId!='')
                        {
                              $isselcted = ($investorType==$id) ? 'SELECTED' : "";
                              echo "<OPTION id=".$id. " value='".$id."' ".$isselcted.">".$name."</OPTION> \n";
                        }
                        else
                        {
                               $isselcted = ($getinv==$name) ? 'SELECTED' : "";
                              echo "<OPTION id=".$id. " value='".$id."' ".$isselcted.">".$name."</OPTION> \n";
                        }*/
                              $isselcted = ($investor_head==$id) ? 'SELECTED' : "";
                              echo "<OPTION id=".$id. " value='".$id."' ".$isselcted.">".$countryname."</OPTION> \n";
                }
                mysql_free_result($countryquery);
            }
    ?>
</SELECT>
  </li>
    


<li class="odd"><h4>Exit Status</h4>
    <?php $exitstatus=$_POST["exitstatus"]; ?>
    <SELECT NAME="exitstatus" id="exitstatus1" style=" background: <?php echo $background; ?>;" <?php if($disable_flag == "1"){ echo "disabled"; } ?>>
                    <OPTION  value="--" selected> Select </option>
                    <OPTION  value="0" <?php if($exitstatus=="0") echo "selected" ?>> Partial </option>
                    <OPTION  value="1" <?php if($exitstatus=="1") echo "selected" ?>> Complete </option>
                </SELECT>
</li>

    <li class="odd range-to"><h4>Return Multiple</h4>

        <?php $txtmultipleReturnFrom=($_POST['txtmultipleReturnFrom']!="")? $_POST['txtmultipleReturnFrom']:"";
        $txtmultipleReturnTo=($_POST['txtmultipleReturnTo']!="")? $_POST['txtmultipleReturnTo'] :"";
        ?>
        
<input type="text" name="txtmultipleReturnFrom" id="txtmultipleReturnFrom" onkeypress="return isNumberKey(event)" value="<?php echo $txtmultipleReturnFrom ?>" size="11" <?php if($disable_flag == "1"){ echo "disabled"; } ?>> to
<input type="text" name="txtmultipleReturnTo" id="txtmultipleReturnTo" value="<?php echo $txtmultipleReturnTo ?>" size="11"  onkeypress="return isNumberKey(event)" onblur="isless();" <?php if($disable_flag == "1"){ echo "disabled"; } ?>>

</li>
 <li class="odd range-to"><h4>Year Founded</h4>
                <select name="yearafter" id="yearafter"  style=" background: <?php echo $background; ?>; ;" <?php if($disable_flag == "1"){ echo "disabled"; } ?>>
                           <option value=''></option>
                           <!-- <?php //for($i=1920; $i<=date("Y"); $i++){?> -->
                           <?php for($i=date("Y"); $i>=1920; $i--){?>
                              <option value='<?php echo $i ?>' <?php if($yearafter == $i) echo 'selected'; ?>><?php echo $i ?></option>
                           <?php } 
                           ?>
                           </select>
                <span class="range-text"> to</span> 
                <select name="yearbefore" id="yearbefore"  style=" background: <?php echo $background; ?>;" <?php if($disable_flag == "1"){ echo "disabled"; } ?>>
                            <option value=''></option>
                            <!-- <?php //for($i=1920; $i<=date("Y"); $i++){?> -->
                            <?php for($i=date("Y"); $i>=1920; $i--){?>
                              <option value='<?php echo $i ?>' <?php if($yearbefore == $i) echo 'selected'; ?>><?php echo $i ?></option>
                           <?php } 
                           ?>
                           </select>
            </li>
    <li>
        <input type="button" name="fliter_stage" class="fliter_stage" value="Filter" onclick="this.form.submit();" <?php if($disable_flag == "1"){ echo "disabled"; } ?>>
    </li>


</ul></div>
  </div>
  
<!--</form>-->
  
  <h2 class="acc_trigger <?php if($showdealsbyflag==1){ ?> showdeal <?php } ?>"><a href="#">Show deals by</a></h2>
  
<form method="post" action="" name="showdealsbyform" id="showdealsbyform">
  <div  class="acc_container " style="display: none;">
    <div class="block">
<ul >

<li class="ui-widget" style="position: relative">
<div style="display: inline-flex;width:100%;"><h4>Investor</h4>
    <span style="position: absolute;
    right: 25px;">
        
        <div class="switchtag-and-or investor-switch"> 
                     <input type="radio" id="invand" value="0" name="invandor" class="hidden-field" /><span class="custom radio "></span>
                    <input type="radio" value="1" id="invor" name="invandor" class="hidden-field" checked="checked"/><span class="custom radio "></span>
                    <label for="invand" class="inv cb-disable "><span>AND</span></label>
                    <label for="invor" class="inv cb-enable"><span>OR</span></label>
                </div>
    </span></div>
   
        
   <!-- <input type="text" id="investorauto" name="investorauto" value="<?php if($_POST['keywordsearch']!='') echo  $_POST['investorauto'];  ?>" placeholder="" style="width:220px;" autocomplete="off" <?php if($_POST['keywordsearch']!='') echo "readonly='readonly'";  ?>>
     <input type="hidden" id="keywordsearch" name="keywordsearch" value="<?php if(isset($_POST['keywordsearch'])) echo  $_POST['keywordsearch'];  ?>" placeholder="" style="width:220px;">-->
        
        <?php if($_POST['investorauto_sug_other'] != ''){
            $isearch = $_POST['keywordsearch_other'];
            $iauto = $investorauto;
        }else{
            $isearch = $_POST['keywordsearch'];
            $iauto = $_POST['investorauto_sug'];
            
        } ?>   
        <input type="text" id="investorauto_sug" name="investorauto_sug" value="<?php if($iauto!='') echo  $iauto;  ?>" placeholder="" style="width:220px;" autocomplete="off" <?php if($isearch!='') echo "readonly='readonly'";  ?>>
     <input type="hidden" id="keywordsearch_sug" name="keywordsearch_sug" value="<?php if(isset($isearch)) echo  $isearch;  ?>" placeholder="" style="width:220px;">
     <input type="hidden" id="invradio" name="invradio" value="<?php if($invandor!=''){echo $invandor;}else {echo 1;}?>" placeholder="" style="width:220px;"> 
     
     
<!--     <span id="inv_clearall" title="Clear All" onclick="clear_keywordsearch();" style="<?php if($_POST['keywordsearch']=='') echo 'display:none;';  ?>background: #BFA074;  position: absolute;  top: 29px;  right: 30px;  padding: 3px;">(X)</span>
     <div id="investorauto_load" style="  overflow-y: scroll;  max-height: 110px;  background: #fff;display:none;  width: 223px;">
        
    </div>-->
     
     
</li>
<li class="ui-widget" style="position:relative"><h4>Acquirer</h4>
<!--    <input type=text name="acquirersearch" id="acquirersearch" style="width: 97%;">-->
    
    <input type="text" id="acquirerauto" name="acquirerauto" value="<?php if($_POST['acquirersearch']!='') echo  $_POST['acquirerauto'];  ?>" placeholder="" style="width:220px;" autocomplete="off" <?php if($_POST['acquirersearch']!='') echo "readonly='readonly'";  ?>>
    <input type="hidden" id="acquirersearch" name="acquirersearch" value="<?php if(isset($_POST['acquirersearch'])) echo  $_POST['acquirersearch'];  ?>" placeholder="" style="width:220px;">
     
     <span id="acq_clearall" title="Clear All" onclick="clear_acquirersearch1();" style="<?php if($_POST['acquirersearch']=='') echo 'display:none;';  ?>background: #BFA074;  position: absolute;  top: 29px;  right: 30px;  padding: 3px;">(X)</span>
     <div id="acquirerauto_load" style="  overflow-y: scroll;  max-height: 110px;  background: #fff;display:none;  width: 223px;">
        
    </div>
    
    </li>
<li class="ui-widget" style="position: relative"><h4>Company</h4>
<!--    <input type="text" value="<?php echo $_POST['companysearch']; ?>" name="companysearch" id="ascompanysearch"  class=""  autocomplete=off  style="width:220px;"/>-->
    <?php 
        if($_POST['companyauto_other'] != ''){
            $csearch = $_POST['companysearch_other'];
            $cauto = $_POST['companyauto_other'];
        }else if($_POST['companysearch'] !=''){
            $csearch = $_POST['companysearch'];
            $cauto = $_POST['companyauto'];            
        }else{
            $csearch = $companysearch;
            $cauto = $company_filter;
            
        } ?>
    <!-- <input type="text" id="companyauto" name="companyauto" value="<?php if($cauto!='') echo $cauto;  ?>" placeholder="" style="width:220px;" autocomplete="off" <?php if($csearch!='') echo "readonly='readonly'";  ?>> -->
    <input type="hidden" id="companysearch" name="companysearch" value="<?php echo $csearch;  ?>" placeholder="" style="width:220px;">
     <input type="text" id="companyauto_sug" name="companyauto_sug" value="<?php echo $cauto;  ?>" placeholder="" style="width:220px;" autocomplete="off" <?php if($csearch!='') echo "readonly='readonly'";  ?>>
     
    <!-- <span id="com_clearall" title="Clear All" onclick="clear_companysearch1();" style="<?php if($csearch=='') echo 'display:none;';  ?>background: #BFA074;  position: absolute;  top: 29px;  right: 30px;  padding: 3px;">(X)</span> -->
     
    <div id="companyauto_load" style="  overflow-y: scroll;  max-height: 110px;  background: #fff;display:none;  width: 223px;">
        
    </div>
</li>

<!-- <li class="ui-widget" style="position: relative"><h4>Sector</h4>
    <?php if($_POST['sectorsearch_other'] != ''){
            $ssearch = $_POST['sectorsearch_other'];
            $sauto = $_POST['sectorsearch_other'];
        }else{
            $ssearch = $_POST['sectorsearch'];
            $sauto = $_POST['sectorauto'];
            
        } ?>
    <input type="text" id="sectorauto" name="sectorauto" value="<?php if($ssearch!='') echo  $sauto;  ?>" placeholder="" style="width:220px;" autocomplete="off" <?php if($ssearch!='') echo "readonly='readonly'";  ?>>
    <input type="hidden" id="sectorsearch_multiple" name="sectorsearch" value="<?php if(isset($ssearch)) echo  stripslashes($ssearch);  ?>" placeholder="" style="width:220px;">
     
     <span id="sec_clearall" title="Clear All" onclick="clear_sectorsearch1();" style="<?php if($ssearch=='') echo 'display:none;';  ?>background: #BFA074;  position: absolute;  top: 29px;  right: 30px;  padding: 3px;">(X)</span>
     <div id="sectorauto_load" style="  overflow-y: scroll;  max-height: 110px;  background: #fff;display:none;  width: 223px;">
        
    </div>     
</li> -->
<?php  if($_POST['popup_select'] == 'legal_advisor'){
            $lauto = $legal_filter;
        }else if($_POST['advisorsearch_legal_other'] != ''){
            $lauto = $_POST['advisorsearch_legal_other'];
        }else {
            $lauto = $_POST['advisorsearch_legal'];            
        } ?>
<li class="ui-widget"><h4>Legal Advisor</h4>
    <input type="text" value="<?php if(isset($lauto)) echo  $lauto;  ?>" name="advisorsearch_legal" id="asadvisorsearch_legal"  class=""  autocomplete=off  style="width:220px;"/>
</li>
<?php
         if($_POST['popup_select'] == 'transaction_advisor'){
            $tauto = $transaction_filter;
        }else if($_POST['advisorsearch_trans_other'] != ''){
            $tauto = $_POST['advisorsearch_trans_other'];
        }else{
            $tauto = $_POST['advisorsearch_trans'];            
        } ?>
<li class="ui-widget"><h4>Transaction Advisor</h4>
    <input type="text" value="<?php if(isset($tauto)) echo  $tauto;  ?>" name="advisorsearch_trans" id="asadvisorsearch_trans"  class=""  autocomplete=off  style="width:220px;"/>
</li>




    <li>
        <input name="reset" id="resetall" class="reset-btn" type="button" value="Reset" style="float: left;" />
        <input type="button" name="fliter_stage" value="Filter" onclick="this.form.submit();" style="float: right;">
    </li>
</ul>
</div>
        </div>
   <!-- <h2 class="acc_trigger helptag" ><a href="#" style="display: inline-block;">Tag Search</a>
               <span class="helplineTag helplinetagicon" style=""> 
                        <a  class="help-icon1 tooltip tagpopup"><i class="far fa-question-circle" style="color: #fff;background-image: none;"></i>
                            <span >
                                
                                <img class="showtextlarge" src="images/callout.gif" style="left: 50px;">
                                    Tag List
                            </span>
                        </a>
                </span> 
                </h2>
    <div  class="acc_container " style="display: none;">
        <div class="block">

            <ul > 

            <?php //if($_POST['tagsearch']){
                //$tagauto = $_POST['tagsearch'];            
            //} ?>
            <li class="ui-widget">
            <input type="hidden" id="tagsearch" name="tagsearch" value="<?php echo  $tagsearch;  ?>" placeholder="" style="width:220px;">
            <input type="text" id="tagsearch_auto" name="tagsearch_auto" value="<?php echo  $tagsearch;  ?>" placeholder="" style="width:220px;"> 
            <input type="hidden" id="tagradio" name="tagradio" value="<?php if($tagandor!=''){echo $tagandor;}else {echo 0;}?>" placeholder="" style="width:220px;"> 

            </li>
            <li class="tagpadding">
          <div class="btn-cnt"> 
                <div class="switchtag-and-or"> 
                     <input type="radio" id="and" value="0" name="tagandor" class="hidden-field" checked="checked"/><span class="custom radio "></span>
                    <input type="radio" value="1" id="or" name="tagandor" class="hidden-field"/><span class="custom radio "></span>
                    <label for="and" class="cb-enable "><span>AND</span></label>
                    <label for="or" class="cb-disable"><span>OR</span></label>
                </div>
            </div>
            <input type="button" name="fliter_stage" value="Filter" onclick="this.form.submit();" style="float: right;">
            </li>

            </ul>
        </div>
    </div> -->
</form>
         <?php if($investorsug_response!=''){
            
            $prepopulate='prePopulate :  '.$investorsug_response.',';
        } ?>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
    <script type="text/javascript" >
     $(document).ready(function(){
        // Tag Search
            var tagsearchval = $('#tagsearch').val();
            if(tagsearchval == ''){
                $('.acc_trigger.helptag').removeClass('active').next().hide();
            }
        // Tag search
    });
      $('#invhead').select2();
     $tagradio=$('#tagradio').val();
if($tagradio==0){
    $('#and').prop('checked', true);
    $('#or').prop('checked', false);
    $('.cb-enable').addClass('selected');
    $('.cb-disable').removeClass('selected');

   
}else{
    $('#or').prop('checked', true);
    $('#and').prop('checked', false);
    $('.cb-disable').addClass('selected');
    $('.cb-enable').removeClass('selected');
}  
$invradio=$('#invradio').val();
if($invradio==0){
    $('#invand').prop('checked', true);
    $('#invor').prop('checked', false);
    $('.inv.cb-disable').addClass('selected');
    $('.inv.cb-enable').removeClass('selected');
}else{
    $('#invor').prop('checked', true);
    $('#invand').prop('checked', false);
    $('.inv.cb-enable').addClass('selected');
    $('.inv.cb-disable').removeClass('selected');
}
    $(document).ready(function(){ 
    $(".tagpopup").click(function(){
      $('.overlayshowdow').show();
      $('.overlaydiv').show();
      $("html, body").animate({ scrollTop: 0 }, "slow");
    });
    $(".close,.overlayshowdow").click(function(){
        $('.overlayshowdow').hide();
        $('.overlaydiv').hide();
    });
     $("#yearbefore").change(function(){
    
    if($("#yearafter").val() != ''){
        if($("#yearbefore").val() < $("#yearafter").val()){
            alert('Year Before is not lesser than year After');
            $("#yearbefore").val('');
        }
    }   

});
        $(".cb-enable").click(function(){
            var parent = $(this).parents('.switchtag-and-or');
            $('.cb-disable',parent).removeClass('selected');
            $(this).addClass('selected');
            $('.checkbox',parent).attr('checked', true);
        });
           $(".cb-disable").click(function(){
            var parent = $(this).parents('.switchtag-and-or');
            $('.cb-enable',parent).removeClass('selected');
            $(this).addClass('selected');
            $('.checkbox',parent).attr('checked', false);
        });  
        $("#investorauto_sug").tokenInput("ajaxmainvestorDetails.php?mavcf=<?php echo $vcflagValue; ?>", {
                theme: "facebook",
                minChars:2,
                queryParam: "ma_q",
                hintText: "",
                noResultsText: "No Result Found",
                preventDuplicates: true,
                onAdd: function (item) {
                    //$("#companyauto_sug").tokenInput("clear");
                      clear_companysearch();
                      clear_acquirersearch();
                      clear_sectorsearch();
                      clear_searchallfield();
                      $('#keywordsearch,#sectorsearch,#asadvisorsearch_trans,#searchallfield,#asadvisorsearch_legal,#acquirersearch,#tagsearch').val("");
                    $('#investorauto,#sectorsearchauto,#asadvisorsearch_transauto,#asadvisorsearch_legalauto,#acquirerauto,#tagsearch_auto').val("");
                       // disableFileds();
                      
                },
                onDelete: function (item) {
                    var selectedValues = $('#investorauto_sug').tokenInput("get");
                    var inputCount = selectedValues.length;
                    if(inputCount==0){ 
                       // reloadPage();
                     //  enableFileds();
                    }
        },
                <?php echo $prepopulate; ?>
        });

        $("#companyauto_sug").tokenInput("ajaxCompanyDetails_auto.php?vcflag=<?php echo $vcflagValue; ?>",{
            theme: "facebook",
            minChars:2,
            queryParam: "pe_cq",
            hintText: "",
            noResultsText: "No Result Found",
            preventDuplicates: true,
                onAdd: function (item) {
                     // $("#investorauto_sug").tokenInput("clear");
                      //clear_keywordsearch();
                      clear_sectorsearch();
                      clear_searchallfield();
                     // disableFileds();
                     $("#tagsearch").val("");
                      $('#tagsearch_auto').val("");
                      $('#keywordsearch,#sectorsearch,#advisorsearch_trans,#searchallfield,#advisorsearch_legal,#tagsearch').val("");
                    $('#investorauto,#sectorsearchauto,#advisorsearch_transauto,#advisorsearch_legalauto,#tagsearch_auto').val("");

                },
                onDelete: function (item) {
                    var selectedValues = $('#companyauto_sug').tokenInput("get");
                    var inputCount = selectedValues.length;
                    if(inputCount==0){ 
                       // reloadPage();
                      // enableFileds();
                    }
        },
            prePopulate : <?php if($companysug_response!=''){echo   $companysug_response; }else{ echo 'null'; } ?>
        });
    }); 
      
//    function clear_keywordsearch(){
//     $("#investorauto").removeAttr('readonly');  
//     val='';
//     $("#investorauto, #keywordsearch_multiple").val(val); 
//     $("#investorauto_load").fadeOut();
//     $("#inv_clearall").fadeOut(); 
//} 

    $( "#asadvisorsearch_trans,#asadvisorsearch_legal" ).keyup(function() {
        var val_trans = $("#asadvisorsearch_trans").val();
        var val_legal = $("#asadvisorsearch_legal").val();
        if(val_legal.length < 1 && val_trans.length < 1){
            enableFileds();
        }else{
            disableFileds();            
        }
    });  

  function clear_companysearch(){
     $("#companyauto").removeAttr('readonly');  
     val='';
     $("#companyauto,#companysearch").val(val); 
     $("#companyauto_load").fadeOut();
     $("#com_clearall").fadeOut(); 
}  
  function clear_searchallfield(){
     $("#searchallfieldHide").val('remove');
     $("#searchallfield").val('');
     $("#searchallfield").fadeOut();
} 
  function clear_acquirersearch(){
     $("#acquirerauto").removeAttr('readonly');  
     val='';
     $("#acquirerauto,#acquirersearch").val(val); 
     $("#acquirerauto_load").fadeOut();
     $("#acq_clearall").fadeOut(); 
}  

  function clear_sectorsearch(){
     $("#sectorauto").removeAttr('readonly');  
     val='';
     $("#sectorauto,#sectorsearch_multiple").val(val); 
     $("#sectorauto_load").fadeOut();
     $("#sec_clearall").fadeOut(); 
} 
  function clear_sectorsearch1(){
     $("#sectorauto").removeAttr('readonly');  
     val='';
     $("#sectorauto,#sectorsearch").val(val); 
     $("#sectorauto_load").fadeOut();
     $("#sec_clearall").fadeOut(); 
     enableFileds();
    // reloadPage();
} 

  function clear_companysearch1(){
     $("#companyauto").removeAttr('readonly');  
     val='';
     $("#companyauto,#companysearch").val(val); 
     $("#companyauto_load").fadeOut();
     $("#com_clearall").fadeOut(); 
     enableFileds();
} 

  function clear_acquirersearch1(){
     $("#acquirerauto").removeAttr('readonly');  
     val='';
     $("#acquirerauto,#acquirersearch").val(val); 
     $("#acquirerauto_load").fadeOut();
     $("#acq_clearall").fadeOut(); 
     enableFileds();
}  

function disableFileds(){
    $("#sltindustry").val('--');
    $("#sltsector").val('');
    $("#sltsubsector").val('');
    $("#companyauto_sug").val('');
    $("#companysearch").val('');
    $("#sltindustry").prop("disabled", true);    
    $("#InType").val('');
    $("#InType").prop("disabled", true);
    $("#invType").val('--');
    $("#invType").prop("disabled", true);
    $("#invhead").val('--');
    $("#invhead").prop("disabled", true);
    $("#txtmultipleReturnFrom").val('');
    $("#txtmultipleReturnFrom").prop("disabled", true);
    $("#txtmultipleReturnTo").val('');
    $("#txtmultipleReturnTo").prop("disabled", true);
    $("#dealtype").val('--');
    $("#dealtype").prop("disabled", true);
    $("#exitstatus1").val('--');
    $("#exitstatus1").prop("disabled", true);
    $(".fliter_stage").prop("disabled", true);
    $("#tagsearch_auto").prop("disabled", true);
  //  $('#sltindustry, #stage, #round, #comptype, #dealtype_debtequity, #Syndication,#citysearch,#invType,#invrangestart,#invrangeend,#exitstatus,#valuations').css('background-color', "#dddddd !important");
    $('#InType, #invType,#invhead,#exitstatus1').attr('style', 'background-color: #dddddd !important');
}
function enableFileds(){ 
    $("#sltindustry").prop("disabled", false);
    $("#InType").prop("disabled", false);
    $("#invType").prop("disabled", false);
    $("#invhead").prop("disabled", false);
    $("#txtmultipleReturnFrom").prop("disabled", false);
    $("#txtmultipleReturnTo").prop("disabled", false);
    $("#dealtype").prop("disabled", false);
    $("#exitstatus1").prop("disabled", false);
    $(".fliter_stage").prop("disabled", false);
    $("#tagsearch_auto").prop("disabled", false);
    //$('#sltindustry, #stage, #round, #comptype, #dealtype_debtequity, #Syndication,#citysearch,#invType,#invrangestart,#invrangeend,#exitstatus,#valuations').css('background-color', "#ffffff !important");
    $('#InType, #invType,#invhead,#exitstatus1').attr('style', 'background-color: #ffffff !important');
}
    $( "#searchallfield" ).keyup(function() {
            $("#sltindustry").val('');  
            $("#InType").val('');
            $("#invType").val('--');
            $("#invhead").val('--');
            $("#txtmultipleReturnFrom").val('');
            $("#txtmultipleReturnTo").val('');
            $("#dealtype").val('--');
            $("#exitstatus1").val('--');
            $("#investorauto_sug").val('');
            $("#companyauto").val('');
            $("#sectorauto").val('');
            $("#asadvisorsearch_legal").val('');
            $("#asadvisorsearch_trans").val('');
            $("#yearafter").val('');
            $("#yearbefore").val('');
    });
    $(document).ready(function(){ 
       $(document).ready(function(){ 
        $(document).on('change', '#dealtype', function() {
          // $('#InType').prop("disabled",true);
          // $('#InType').css("cursor","not-allowed");
            if(($('#dealtype').val())!='' && ($('#dealtype').val())!=null )
                {
                    ondealtypedisable();
                }else{
            ondealtypeenable();
            
           }
          });
          $(document).on('change', '#InType', function() {
          //$('.dealtype button.ui-multiselect').attr('style', 'width: 223px; background-color: #dddddd !important').prop("disabled",true);
           if(($('#InType').val())!='' && ($('#InType').val())!= "--")
                {
                    ontypedisable();
                }else{
            ontypeenable();
            
           }
          });

        if(($('#InType').val())!='' && ($('#InType').val())!= "--")
                {
                    ontypedisable();
                }else{
            ontypeenable();
            
           }
           if(($('#dealtype').val())!='' && ($('#dealtype').val())!=null )
                {
                    ondealtypedisable();
                }else{
            ondealtypeenable();
            
           }
            function ontypedisable(){
               $('.dealtype button.ui-multiselect').attr('style', 'width: 223px; background-color: #dddddd !important').prop("disabled",true);
            }
            function ontypeenable(){
               $('.dealtype button.ui-multiselect').attr('style', 'width: 223px; background-color: #fff !important').prop("disabled",false);
            }
            function ondealtypedisable(){
              $('#InType').prop("disabled",true);
              $('#InType').css("cursor","not-allowed");
            }
            function ondealtypeenable(){
               $('#InType').prop("disabled",false);
               $('#InType').css("cursor","default");
            }
        });
    $(document).on('change', '#sltsector', function() {
        var sector=$("#sltsector").val();
        var industry=$("#sltindustry").val();
        if(sector!=null)
        {
            $('.selectgroup.sltsubsector button.ui-multiselect').attr('style', 'width: 223px; background-color: #fff !important').prop("disabled",false);
            $.ajax({
                    type: "post",
                    url: "ajaxsector.php",
                    data: {
                        vcflag: <?php echo "'EXITS'"; ?>,
                        industry: industry,
                        sector:sector
                    },
                    success: function(data) {
                        var innerdata=$.parseJSON(data);
                        var datacount = innerdata.length;   
                        $("#sltsubsector").empty();
                        $('#filtersubsector').val('');
                    if(datacount>0) {
                            var multiselect='';
                            var subsectorSelected='';
                            $.each(innerdata, function (key, item) {
                                subsectorSelected+=item['id']+',';
                                multiselect+="<OPTION class='subsectorlist' id='subsector_"+item['id']+ "' value='"+item['name']+"' >"+item['name']+"</OPTION>";
                            });
                            $('#filtersubsector').val(subsectorSelected.substring(0, subsectorSelected.length - 1));
                            $("#sltsubsector").append(multiselect);
                            $("#sltsubsector").multiselect('refresh');
                            $(".subsectorlist").parent().prev().find('ul').css("display","none");
                        }
                    }
                });
        } else {
            $('#filtersubsector').val('');
            $("#sltsubsector").empty();
            $("#sltsubsector").multiselect('refresh');
            $('.sltsubsector button.ui-multiselect').attr('style', 'width: 223px; background-color: #dddddd !important').prop("disabled",true);
        }
    });

    $(document).on('change', '#sltindustry', function() {
        var industry=$("#sltindustry").val();
        
        if(industry!=null)
        {
            $("#sltsubsector").empty();
            $("#sltsubsector").multiselect('refresh');
            $('#filtersubsector').val('');
            $('.selectgroup.sltsubsector button.ui-multiselect').attr('style', 'width: 223px; background-color: #dddddd !important').prop("disabled",true);
            $.ajax({
                    type: "post",
                    url: "ajaxindustry.php",
                    data: {
                        vcflag: <?php echo "'EXITS'"; ?>,
                        sector:industry
                    },
                    success: function(data) {
                        var innerdata=$.parseJSON(data);
                        var datacount = innerdata.length;   
                        $("#sltsector").empty();
                        $('#filtersector').val('');
                    if(datacount>0) {
                            var multiselect='';
                            var sectorSelected='';
                            $.each(innerdata, function (key, item) {
                                sectorSelected+=item['id']+',';
                                multiselect+="<OPTION class='sectorlist' id='subsector_"+item['id']+ "' value="+item['id']+" >"+item['name']+"</OPTION>";
                            });
                            $('#filtersector').val(sectorSelected.substring(0, sectorSelected.length - 1));
                            $("#sltsector").append(multiselect);
                            $("#sltsector").multiselect('refresh');
                            $('.sltsector button.ui-multiselect').attr('style', 'width: 223px; background-color: #fff !important').prop("disabled",false);
                            $(".sectorlist").parent().prev().find('ul').css("display","none");
                        }
                    }
                });
        } else {
            $('.sltsector button.ui-multiselect').attr('style', 'width: 223px; background-color: #dddddd !important').prop("disabled",true);
            $('.sltsubsector button.ui-multiselect').attr('style', 'width: 223px; background-color: #dddddd !important').prop("disabled",true);
            $('#filtersector').val('');
            $("#sltsector").empty();
            $('#filtersubsector').val('');
            $("#sltsubsector").empty();
            $("#sltsector").multiselect('refresh');
            $("#sltsubsector").multiselect('refresh');
        }
    });

});
    </script>
    <?php } ?>